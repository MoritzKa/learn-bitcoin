## Cos’è il Mining di Bitcoin?
Non è necessario comprendere come funziona il mining di Bitcoin per utilizzare Bitcoin, ma se sei interessato a carpirne i dettagli, cosa fanno i miner e come i bitcoin vengono alla luce, continua a leggere.

### Il Mining in Parole Semplici
Immagina di voler riempire un museo con opere d’arte fatte di puzzle, dove ogni puzzle contribuisce all’esperienza del visitatore. Ci sono regole chiare: solamente i puzzle assemblati correttamente e che abbiano vinto una competizione possono essere collocati all’interno del museo. Tu selezioni e ricompensi il bambino che per primo completa il puzzle più complicato. Non vuoi che i bambini possano imbrogliare, e nemmeno che sappiano in anticipo quale puzzle vincerà. Ora immagina di inviare a 10.000 bambini in giro per il mondo lo stesso puzzle, e che loro inizino ad assemblarlo tessera per tessera tutti allo stesso momento. Il bambino che per primo lo completa vince il premio. Con il completamento del puzzle si fornisce una prova del lavoro impiegato.

Il processo di assemblaggio del puzzle non può essere manipolato, nel senso che tessere sbagliate non possono essere inserite nel puzzle e il bambino che vince non può essere selezionato artificialmente. Il bambino più veloce vince il premio. Queste sono le regole. Si possono cambiare le regole solamente nel caso in cui i genitori, i bambini stessi, l'ideatore del puzzle e il museo – tutti partecipanti nella rete del puzzle – decidano collettivamente di farlo. In questo esempio, quando parliamo di premio stiamo metaforicamente parlando della creazione di nuovi bitcoin.

Questo è più o meno come funziona la proof-of-work. Migliaia di computer nel mondo che risolvono problemi matematici contemporaneamente, e così facendo dimostrano di aver impiegato una certa quantità di sforzo computazionale ed energetico e, allo stesso tempo, decentralizzano il guadagno del premio in modo che nessuno possa colludere o prevedere quale miner sarà il prossimo ad aggiungere un blocco alla catena. Il dispendio di energia affrontato dai miner per validare le transazioni e creare nuovi blocchi non solo è prova del loro lavoro, ma mette anche in sicurezza la blockchain. Infatti, non è possibile cambiare il passato – le transazioni storiche – della blockchain di Bitcoin senza affrontare un’enorme spesa in infrastrutture e consumo energetico per riscrivere la blockchain. Per questo motivo gli attacchi alla rete di Bitcoin sono teoricamente possibili, ma nella realtà dei fatti estremamente dispendiosi.

### Il Mining nel Dettaglio

Immagina di utilizzare già Bitcoin e di avere un wallet per Bitcoin installato sul tuo smartphone. Ordini un prodotto online, selezionando bitcoin come metodo di pagamento. Il sito ti mostrerà il suo indirizzo Bitcoin e tu userai il tuo wallet per inviare la cifra richiesta. Dopodiché succede questo:

Il tuo wallet firma la transazione. Questa viene poi trasmessa e diffusa nella rete di Bitcoin ed entra a far parte della _Mempool_, una raccolta di transazioni non confermate. Il beneficiario del pagamento riceve la tua transazione, e il full node del wallet la convalida. Prima che questa venga finalizzata, c'è ancora bisogno della conferma che la transazione sia stata aggiunta con successo all’interno di un blocco. In questo momento potrai vedere sul tuo wallet che la transazione è stata inviata ma risulterà ancora in sospeso, il che significa che non è ancora stata inserita definitivamente nella blockchain. A questo punto hai ancora zero conferme.

Contemporaneamente, anche i miner ricevono la tua transazione nella Mempool del loro nodo. Un miner di Bitcoin è un dispositivo specializzato denominato ASIC. Il suo unico compito è quello di eseguire l'algoritmo di _hashing_ e risolvere il puzzle di mining il più velocemente possibile. Vi sono centinaia di migliaia di miner, decentralizzati ovunque nel mondo.

Inoltre, i miner hanno i loro full node che eseguono il software che convalida la tua transazione, controllando che tutte le regole del protocollo siano seguite e che tu, in qualità di mittente del pagamento, possieda bitcoin a sufficienza per saldare la transazione. Se la risposta a questo controllo è positiva, loro aggiungeranno la transazione nel loro modello di blocco. Ma prima di tutto, quando generano un nuovo modello di blocco, i miner vi inseriscono la cosiddetta transazione _coinbase_, la quale li premierà di 6,25 bitcoin qualora dovessero vincere la competizione di mining. Dopo aver inserito la transazione coinbase, i computer selezionano varie transazioni dalla Mempool e le aggiungono all’interno del modello di blocco generato precedentemente.

Nel frattempo i dispositivi che eseguono l’algoritmo di hashing (ASIC), iniziano a risolvere il puzzle matematico. Devono competere con tutti gli altri dispositivi a livello globale. Quello che risolve per primo il puzzle trasmetterà il blocco agli altri nodi, i quali lo verificheranno e a loro volta lo diffonderanno agli altri, e così via finché ogni nodo della rete avrà validato e aggiunto il blocco in questione. Solamente quando saranno stati aggiunti 99 ulteriori blocchi alla blockchain, al miner vincitore sarà permesso di spendere il premio di 6,25 bitcoin che si era guadagnato.

Il beneficiario del pagamento, o meglio il loro (?) full node, riceve il blocco e lo convalida nuovamente, confermando infine la transazione. Il tuo pagamento è ora collegato alla catena in un blocco di dati, ed è formalmente completato. Tu riceverai sul tuo wallet Bitcoin un messaggio che conferma che il pagamento ha raggiunto il destinatario. Nel tuo wallet vedrai che la tua transazione avrà ora una conferma. Ogni 10 minuti circa, un nuovo blocco viene creato ed aggiunto dopo il blocco contenente la tua transazione. Dopo sei blocchi, la transazione è considerata praticamente irreversibile.

L’arco di tempo necessario alla conferma della tua transazione dipende dalle _fee_, ovvero dalle commissioni, che tu hai scelto di pagare sulla transazione. Più le fee sono alte, più velocemente i miner inseriranno la tua transazione in un blocco, dal momento che loro guadagnano le fee in aggiunta al premio di 6,25 bitcoin.

Perché questo puzzle matematico? La proof-of-work richiede un alto consumo di risorse, dato che i computer richiedono grandi quantità di energia. Questo aspetto attira molte critiche nei confronti di Bitcoin in considerazione dei cambiamenti climatici che noi umani abbiamo causato negli ultimi decenni. Il capitolo “L’impronta Ecologica di Bitcoin” affronta questo tema in maggior dettaglio.

Insomma, perché dobbiamo consumare così tanta elettricità? Le risposte sono sicurezza e decentralizzazione. Il bisogno di impegnare sforzo ed energia nel mining protegge i dati nella blockchain da eventuali manipolazioni, rendendola immutabile e incensurabile. Non ci sono Stato né organizzazione che possano modificare la blockchain.

Sin dalla sua creazione nel 2009, la blockchain di Bitcoin non è mai stata violata. Circa 18,74 milioni di bitcoin sono stati generati fino ad ora, il cui valore attuale è di oltre 600 miliardi di dollari americani (a giugno 2021). Se è vero che un attacco riuscito alla rete di Bitcoin sarebbe preoccupante ed eroderebbe la fiducia, questo richiederebbe che almeno il 51% della potenza computazionale dei miner fosse concentrata nelle mani di un singolo individuo o conglomerato. In questo modo sarebbe possibile per una fazione malevola generare nuovi blocchi più velocemente dell’altro 49% dei miner, il che significa che potrebbero teoricamente scavalcare il consenso. Ma un tale attacco non può comunque sottrarre, reindirizzare o spendere bitcoin senza firme. Gli aggressori potrebbero solamente tentare un _double-spend_, ovvero una doppia spesa, dei propri bitcoin nei blocchi più recenti, causando così un'interruzione del servizio di creazione dei blocchi futuri. 

Oltrettutto, se un attacco a Bitcoin dovesse mai avere successo, allora la blockchain di Bitcoin si dividerebbe, come si è già divisa altre volte in passato. I partecipanti alla blockchain di Bitcoin potrebbero decidere di approvare la ‘nuova’ catena o continuare a sostenere la ‘vecchia’ versione della catena. Questa scissione di versioni causata da regole intrinseche è nota come _hard fork_. La hard fork avvenuta nel 2017 tra Bitcoin e Bitcoin Cash dimostrò che un evento simile non avrebbe danneggiato la legittimità della blockchain.

La seconda principale funzione del mining è garantire la decentralizzazione. Da un lato, lo fa rendendo la creazione di moneta indipendente da entità centralizzate e avide di potere come le banche centrali, dall’altro assicurando che nessun miner possa trarre vantaggi a scapito degli altri e manipolare la blockchain. L'operazione computazionale è complessa e, allo stesso tempo, è anche una questione di fortuna, paragonabile ad una lotteria, rispetto a quale computer troverà per primo una soluzione valida. Ne risulta che non sia possibile predire quale sarà il computer vincente, il che rende impossibile influenzare la blockchain. Se non c'è modo di sapere chi arriverà per primo, non si la può manipolare per guadagnare il premio.

Se stai valutando di iniziare ad usare bitcoin, puoi star certo che la blockchain è mantenuta in sicurezza dal mining e distribuita in modo identico tra migliaia di computer diversi. È molto, molto sicura. Il tuo compito più importante è quello di custodire da solo i tuoi bitcoin e mantenere in sicurezza le tue chiavi private (la tua password).
